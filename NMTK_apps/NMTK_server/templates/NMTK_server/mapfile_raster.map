{% load url from future %}{% load static %}
MAP
  NAME Raster_WMS
  UNITS dd
  EXTENT {{datafile.bbox.0}} {{datafile.bbox.1}} {{datafile.bbox.2}} {{datafile.bbox.3}}
  STATUS ON
  SIZE 512 512
  IMAGECOLOR 255 255 255
  IMAGETYPE PNG

  PROJECTION
   "init=epsg:4326"
  END

  WEB
    IMAGEPATH "/tmp/"
    IMAGEURL "/tmp/"
    TEMPPATH "/tmp/"
    LOG "/tmp/mapserv.log"

    METADATA
      "wms_enable_request" "*"
      "ows_enable_request" "*"
      "wms_include_items" "text/html"
      WMS_TITLE "Raster"
      WMS_ABSTRACT "NMTK Tool Results"
      WMS_ACCESSCONSTRAINTS "none"
      WMS_ONLINERESOURCE "{% url 'api_datafile_wms' api_name='v1' resource_name='datafile' pk=datafile.pk %}"
      WMS_SRS "EPSG:3857 EPSG:4326"
    END
  END
  #
  # BEGIN LAYER DESCRIPTIONS
  #

  LAYER
    NAME "results"
    DATA "{{datafile.file.path}}"
    TYPE RASTER
    TRANSPARENCY ALPHA
    METADATA
      WMS_TITLE "Results"
      WMS_ABSTRACT "Results from NMTK Tool"
      WMS_SRS "EPSG:4326"
      WMS_GROUP_TITLE "Results"
      "gml_include_items" "all"
      "gml_types" "auto"
    END
  END
END

